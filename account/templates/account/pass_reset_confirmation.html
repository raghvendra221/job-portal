{% extends "account/base.html" %}
{% load static %}
{% block title %}Set New Password{% endblock title %}
{% block body_class %}login-page{% endblock %}

{% block content %}
<div class="form-container">
  <div class="glass reset-container mx-auto">
    <h3 class="text-center mb-4">ðŸ”’ Set New Password</h3>

    <form id="setPasswordForm" method="POST" novalidate>
      {% csrf_token %}

      {% for field in form %}
      <div class="form-group mb-3">
        <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
        {{ field }}
        {% if field.errors %}
          <div class="text-danger small mt-1">{{ field.errors|striptags }}</div>
        {% endif %}
      </div>
      {% endfor %}

      <button type="submit" id="submitButton" class="update-btn w-100 mb-3">
  <span id="buttonText">Update Password</span>
  <span id="buttonSpinner" class="spinner-border spinner-border-sm ms-2 d-none" role="status" aria-hidden="true"></span>
</button>
    </form>

    <p class="text-center mt-3 mb-0">
      Remembered your password? <a href="{% url 'login' %}" class="text-decoration-none fw-semibold text-accent">Sign In</a>
    </p>
  </div>
</div>

<script>
const form = document.getElementById('setPasswordForm');
const submitButton = document.getElementById('submitButton');
const buttonText = document.getElementById('buttonText');
const buttonSpinner = document.getElementById('buttonSpinner');

form.addEventListener('submit', function() {
  buttonText.textContent = "Updating...";
  buttonSpinner.classList.remove('d-none');
  submitButton.disabled = true;
});
</script>

<style>
.update-btn {
  background: linear-gradient(135deg, #007bff, #0056d2) !important;
  color: #fff !important;
  border: none !important;
  padding: 0.75rem 1rem !important;
  font-weight: 600 !important;
  border-radius: 10px !important;
  font-size: 1rem !important;
  letter-spacing: 0.3px;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(0, 123, 255, 0.35);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.4rem;
}

.update-btn:hover {
  background: linear-gradient(135deg, #0056d2, #003c9e) !important;
  box-shadow: 0 6px 18px rgba(0, 123, 255, 0.5);
  transform: translateY(-2px);
}

.update-btn:disabled {
  opacity: 0.7 !important;
  cursor: not-allowed !important;
  transform: none !important;
}

.update-btn:focus {
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.4);
}
</style>


{% endblock content %}

